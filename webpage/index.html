<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLE test</title>
    <meta name="description" content="Bluetooth app to connect to device during development.">
    <link rel="icon" sizes="192x192" href="../favicon.png">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body class="p-5">

    <h1>BLE Test</h1>

    <div id="container">
      <!--Packet format setting-->
      <div class="row p-1">
        <b style="color:#ff0000";>Packet: </b>       
        <div class="col p-1">
          <input type="checkbox" id="cb_temp" value="1" checked > Temperature
          <input type="checkbox" id="cb_cap" value="2" checked> Capacitor
          <input type="checkbox" id="cb_acc_data" value="3" checked> Motion data 
          <input type="checkbox" id="cb_acc_int" value="4" checked> Motion interrupt
          <input type="checkbox" id="cb_fuel_gauge" value="5" checked> Fuel gauge    
        </div>
      </div>
      <div class="row p-3">
        <!--Logging-->       
        <div class="column pl-2">
          <!--Log setup-->
          <div class="row pl-3">
            <b style="color:#ff0000";>Log: </b>       
            <div class="col p-1">
              <input type="checkbox" id="cb_log_cap" value="1" checked> Capacitor
              <input type="checkbox" id="cb_log_temp" value="2" checked > Temperature
              <input type="checkbox" id="cb_log_acc" value="3" checked> Motion data 
              <input type="checkbox" id="cb_log_int" value="4" checked> Motion interrupt  
              <input type="checkbox" id="cb_log_fuel_gauge" value="5" checked> Fuel gauge           
            </div>
          </div>
          <!--Log save and start-->
          <div class="row pl-3">
            <div class="col p-1">
              <label for="log">File name</label>
              <input type="text" id="tb_fileName">
              <button type="button" id="btn_log">Start logging</button>
            </div>
          </div>
           <!--.Log row.-->
          <div class="row mt-3">
             <div class="col">
               <div class="card">
                <div class="card-header">
                  <form>
                    <div class="form-group form-check">
                      <label class="form-check-label" for="enLog"><h5>Packet x : [ cap1 | cap2 | cap3 | cap4 ||
                              temp1 | temp2 | temp3 | temp4  || accX | accY | accZ || INT1 | INT2 || BAT_V | BAT_% || rssi_dBm]
                      </h5></label>
                    </div>
                  </form>
                </div>
                <div class="card-body">
                  <ul id="log" class="list-group">
                  </ul>
                </div>
               </div>
             </div>
          </div>
        </div>
        <!--Plotting-->    
        <div class="column">
          <!--Plot setup-->
          <div class="row p-1">
            <b style="color:#ff0000";>Plot: </b>       
            <div class="col p-1">
              <input type="checkbox" id="cb_plot_temp" value="1" checked > Temperature
              <input type="checkbox" id="cb_plot_cap" value="2" checked> Capacitor
              <input type="checkbox" id="cb_plot_acc" value="2" checked> Motion data 
              <input type="checkbox" id="cb_plot_int" value="2" checked> Motion interrupt
            </div>
          </div>
          <!--Data-->
          <div class="row mt-3">
          <div class="col">
            <div id="chartContainer" style="height:200px">
              <div id="statusText">Click here to search for device;</div>
              <canvas id="waves"></canvas>
             </div>
           </div>
         </div>
         <!--Motion interrupt-->
          <div class="row mt-3">
            <div class="col">
              <div id="chartContainer" style="height:50px">
                <canvas id="waves_int"></canvas>
               </div>
             </div>
           </div>
        </div>
      </div>
    </div>
    <script src="nRF52.js"></script>
    <script src="app.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
      $(".dropdown-menu a").click(function(){
         $("#dropdownMenuLink").text("CCD " + $(this).text());
         $(".dropdown-item").removeClass("active");
         $(this).addClass("active");
         $("#ccdModeSelector").text($(this).index()+1);
      });
      $("#enLog").click(function(){
        $("#logEnabled").text(this.checked?"1":"0");
      });
    </script>
  </body>
</html>
